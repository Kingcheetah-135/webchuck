<!-- 
    WebChucK Tutorials, by Mike Mulshine et al

    Praise be to Jack Atherton for making ChucK work on the web... As well as getting Ace to work as a miniAudicle like IDE. WOW.
    
    Praise be to Matt Wright for suggesting the use of pandoc = markdown to html converter, in which we can embed html/js as well.

    Praise of course to Ge Wang for writing ChucK. 

    <3 

    here we go...
-->
<!---
Include the ACE and ChucK stuff
-->
<script type="text/javascript" src="./js/ace.js" charset="utf-8"></script>
<script type="text/javascript" src="./js/editor.js"></script>
<script type="text/javascript" src="./js/defer.js"></script>
<script type="text/javascript" src="./js/webchuck_host.js"></script>
<h1 id="webchuck">WebChucK</h1>
<p>WebChucK brings the strongly-timed audio programming language, <a href="https://chuck.stanford.edu/">ChucK</a>, to your web browser.</p>
<h2 id="what-is-webchuck">What is WebChucK?</h2>
<p>WebChucK wraps a web-assembly compiled version of ChucK's <a href="https://chuck.cs.princeton.edu/doc/program/vm.html">virtual machine</a> in a javascript API that enables communication between the browser UI and underlying ChucK <a href="https://chuck.cs.princeton.edu/doc/language/spork.html">shreds</a>.</p>
<h2 id="compatible-browsers">Compatible Browsers</h2>
<ul>
<li>Chrome and other <a href="https://en.wikipedia.org/wiki/Chromium_(web_browser)">Chromium</a>-based browsers</li>
<li>Firefox</li>
<li>Edge</li>
<li>Opera</li>
<li><em>NOT</em> Safari (<a href="">yet</a>)</li>
</ul>
<h2 id="demo">Demo</h2>
<p>Here is a simple ChucK program that plays a sine wave for 1 second at 220Hz. Click <q>Run Code</q> to run this ChucK program and hear the resulting sound. If you don't hear anything, check out our <a href="">troubleshooting guide</a>.</p>
<div id="editor1" class="ace_editor ace_hidpi ace-chuck" style="font-size: 13px; font-family: Monaco; line-height: 1.25; height: 150px;">
<p>SinOsc osc =&gt; dac;<br />
220 =&gt; osc.freq;<br />
1::second =&gt; now;<br />
</p>
</div>
<p><input id="run1" type="button" value="Run Code" /> <br/><br/></p>
<p>Let's do something more complicated.</p>
<div id="editor2" class="ace_editor ace_hidpi ace-chuck" style="font-size: 13px; font-family: Monaco; line-height: 1.25; height: 150px;">
<p>SinOsc osc =&gt; dac;<br />
330 =&gt; osc.freq;<br />
0.5 =&gt; osc.gain;<br />
1::second =&gt; now;<br />
</p>
</div>
<p><input id="run2" type="button" value="Run Code" /> <br/><br/></p>
<h2 id="tutorials">Tutorials</h2>
<ul>
<li><a href="./tutorials/001.html">Tutorial 1</a>: Getting Started - Running ChucK on a Web Page</li>
<li><a href="./tutorials/002.html">Tutorial 2</a>: Interfacing with ChucK - Updating Variables + Events</li>
<li><a href="./tutorials/002.html">Tutorial 3</a>: Interfacing with ChucK - Listening for Variables + Events</li>
</ul>
<script>
    async function prep() {
        //await preloadFilenames( serverFilesToPreload );
        await startChuck();
        await theChuckReady;
        theChuck.removeLastCode();
    }

    var editor1 = newChuckEditor("editor1");
    var run1 = document.getElementById( "run1" );
    run1.addEventListener( "click", async function() {
        await prep();
        await theChuck.runCode(editor1.getValue());
    });

    var editor2 = newChuckEditor("editor2");
    var run2 = document.getElementById( "run2" );
    run2.addEventListener( "click", async function() {
        await prep();
        await theChuck.runCode(editor2.getValue());
    });
</script>
